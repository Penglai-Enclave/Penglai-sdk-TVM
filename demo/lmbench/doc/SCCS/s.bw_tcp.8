h01815
s 00031/00008/00040
d D 1.3 00/10/16 17:13:39 staelin 4 3
c - Update man pages to match current status
cC
cHhpli8.hpli.hpl.hp.com
cK32499
cZ+02:00
e
s 00008/00007/00040
d D 1.2 97/12/01 15:49:32 lm 3 2
c *** empty log message ***
cC
cK13029
e
s 00047/00000/00000
d D 1.1 94/11/18 01:26:35 lm 2 1
c Initial revision
cK15434
e
s 00000/00000/00000
d D 1.0 94/11/18 01:26:34 lm 1 0
cBlm@lm.bitmover.com|ChangeSet|20000131225335|47351|--LMBENCH--
cHlm.bitmover.com
cK03673
cPdoc/bw_tcp.8
cR7dc15eaaec14a49e
cV4
cX0x23
cZ-08:00
e
u
U
f e 0
f x 0x23
t
lmbench doc checkin
T
I 2
.\" $Id$
D 3
.TH BW_TCP 8 "$Date$" "(c)1994 Larry McVoy" "LMBENCH"
E 3
I 3
.TH BW_TCP 1 "$Date$" "(c)1994 Larry McVoy" "LMBENCH"
E 3
.SH NAME
bw_tcp \- time data movement through TCP/IP sockets
.SH SYNOPSIS
.B bw_tcp
D 4
.I -s
.sp .5
E 4
I 4
[
.I "-m <message size>"
]
[
.I "-M <total bytes>"
]
[
.I "-P <parallelism>"
]
[
.I "-W <warmups>"
]
[
.I "-N <repetitions>"
]
.I "server"
.br or
E 4
.B bw_tcp
D 4
.I hostname [transfersize]
.sp .5
E 4
I 4
.I -s
.br or
E 4
.B bw_tcp
D 4
.I -hostname
E 4
I 4
.I "-S <server>"
E 4
.SH DESCRIPTION
.B bw_tcp
is a client/server program that moves data over a TCP/IP socket.  Nothing is
D 3
done with the data on either side; the data is moved in 48KB chunks.
E 3
I 3
D 4
done with the data on either side; the data is moved in 64KB chunks.
E 4
I 4
done with the data on either side; 
.I "total bytes"
of data is moved in 
.I "message size"
chunks.
E 4
E 3
.LP
.B bw_tcp
has three forms of usage: as a server (-s), as a client (bw_tcp localhost), and
D 4
as a shutdown (bw_tcp -localhost).
E 4
I 4
as a shutdown (bw_tcp -S localhost).
E 4
.LP
D 4
The default amount of data is 3MB.  The client form may specify a different
E 4
I 4
The default amount of data is 10MB.  The client form may specify a different
E 4
amount of data.  Specifications may end with ``k'' or ``m'' to mean
kilobytes (* 1024) or megabytes (* 1024 * 1024).
.SH OUTPUT
D 3
Output format is \f(CB"Socket bandwidth using %s: %0.2f MB/sec\\n", hostname, megabytes_per_second\fP, i.e.,
.sp
E 3
I 3
Output format is
E 3
.ft CB
Socket bandwidth using localhost: 2.32 MB/sec
.ft
.SH MEMORY UTILIZATION
D 3
This benchmark can move up to six times the requested memory per process.
E 3
I 3
This benchmark can move up to six times the requested memory per process
when run through the loopback device.
E 3
There are two processes, the sender and the receiver.
Most Unix
systems implement the read/write system calls as a bcopy from/to kernel space
to/from user space.  Bcopy will use 2-3 times as much memory bandwidth:
there is one read from the source and a write to the destionation.  The
write usually results in a cache line read and then a write back of
the cache line at some later point.  Memory utilization might be reduced
by 1/3 if the processor architecture implemented "load cache line"
and "store cache line" instructions (as well as getcachelinesize).
.SH ACKNOWLEDGEMENT
Funding for the development of
D 3
this tool was provided by Sun Microsystems Computer Corporation.
.SH "SEE ALSO"
E 3
I 3
this tool was provided by Sun Microsystems Computer Corporation 
and Silicon Graphics, Inc.
.SH SEE ALSO
E 3
lmbench(8).
I 4
.SH "AUTHOR"
Carl Staelin and Larry McVoy
.PP
Comments, suggestions, and bug reports are always welcome.
E 4
E 2
I 1
E 1
